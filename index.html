<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Barcode Inventory Scanner</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="app-header">
            <h1>üì¶ Inventory Scanner</h1>
            <p>Scan barcodes to manage your inventory with Color & Size tracking</p>
        </header>

        <!-- Configuration Section -->
        <section class="card configuration-section">
            <div class="card__header">
                <h2>‚öôÔ∏è Airtable Configuration</h2>
            </div>
            <div class="card__body">
                <div class="form-group">
                    <label for="baseId" class="form-label">Base ID</label>
                    <input type="text" id="baseId" class="form-control" placeholder="appXXXXXXXXXXXXXX">
                    <small class="help-text">Find in your Airtable base URL</small>
                </div>
                
                <div class="form-group">
                    <label for="tableName" class="form-label">Table Name</label>
                    <input type="text" id="tableName" class="form-control" placeholder="Inventory" value="Inventory">
                </div>
                
                <div class="form-group">
                    <label for="apiKey" class="form-label">Personal Access Token</label>
                    <input type="password" id="apiKey" class="form-control" placeholder="patXXXXXXXXXXXXXX">
                    <small class="help-text">Generate in your Airtable account settings</small>
                </div>
                
                <div class="flex gap-8">
                    <button id="saveConfig" class="btn btn--primary">Save Configuration</button>
                    <button id="testConnection" class="btn btn--outline">Test Connection</button>
                </div>
                
                <div id="configStatus" class="status-message hidden"></div>
                
                <div class="table-info">
                    <strong>Required Airtable Fields:</strong>
                    <ul>
                        <li>Barcode (Single line text - Primary)</li>
                        <li>Product Name (Single line text)</li>
                        <li>Quantity (Number)</li>
                        <li>Color (Single select or Single line text)</li>
                        <li>Size (Single select or Single line text)</li>
                        <li>Last Updated (Date/Time)</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Scanner Section -->
        <section class="card scanner-section">
            <div class="card__header">
                <h2>üì∑ Barcode Scanner</h2>
            </div>
            <div class="card__body">
                <div id="scanner-container">
                    <div id="reader" style="width: 100%; display: none;"></div>
                    <div id="scanner-placeholder" class="scanner-placeholder">
                        <div class="scanner-icon">üì±</div>
                        <p>Click "Start Camera" to begin scanning</p>
                    </div>
                </div>
                
                <div class="scanner-controls">
                    <button id="startCamera" class="btn btn--primary btn--lg btn--full-width">Start Camera</button>
                    <button id="stopCamera" class="btn btn--secondary btn--lg btn--full-width hidden">Stop Camera</button>
                </div>
                
                <div id="scanResult" class="scan-result hidden">
                    <div class="scanned-code">
                        <strong>Scanned Code:</strong>
                        <span id="barcodeValue"></span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Product Management Section -->
        <section class="card product-section" id="productSection">
            <div class="card__header">
                <h2 id="productSectionTitle">üìã Product Management</h2>
            </div>
            <div class="card__body">
                <div id="existingProductInfo" class="existing-product-info hidden">
                    <div class="product-status">
                        <span class="status status--info">üì¶ Existing Product Found</span>
                    </div>
                    <div class="existing-details">
                        <div class="detail-row">
                            <span class="detail-label">Name:</span>
                            <span id="existingProductName"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Color:</span>
                            <span id="existingProductColor"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Size:</span>
                            <span id="existingProductSize"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Current Quantity:</span>
                            <span id="existingProductQuantity" class="quantity-value"></span>
                        </div>
                    </div>
                </div>

                <div class="product-info">
                    <div class="form-group">
                        <label for="productName" class="form-label">Product Name</label>
                        <input type="text" id="productName" class="form-control" placeholder="Enter product name">
                    </div>
                    
                    <div class="product-attributes">
                        <div class="form-group">
                            <label for="productColor" class="form-label">Color</label>
                            <select id="productColor" class="form-control">
                                <option value="">Select Color</option>
                                <option value="Red">Red</option>
                                <option value="Blue">Blue</option>
                                <option value="Green">Green</option>
                                <option value="Black">Black</option>
                                <option value="White">White</option>
                                <option value="Gray">Gray</option>
                                <option value="Navy">Navy</option>
                                <option value="Pink">Pink</option>
                                <option value="Yellow">Yellow</option>
                                <option value="Purple">Purple</option>
                                <option value="Brown">Brown</option>
                                <option value="Orange">Orange</option>
                                <option value="Custom">Custom</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="productSize" class="form-label">Size</label>
                            <select id="productSize" class="form-control">
                                <option value="">Select Size</option>
                                <optgroup label="Youth Sizes">
                                    <option value="6y">6y</option>
                                    <option value="7y">7y</option>
                                    <option value="8y">8y</option>
                                    <option value="9y">9y</option>
                                    <option value="10y">10y</option>
                                    <option value="11y">11y</option>
                                    <option value="12y">12y</option>
                                </optgroup>
                                <optgroup label="Women's Sizes">
                                    <option value="4">4</option>
                                    <option value="6">6</option>
                                    <option value="8">8</option>
                                    <option value="10">10</option>
                                    <option value="12">12</option>
                                    <option value="14">14</option>
                                    <option value="16">16</option>
                                    <option value="18">18</option>
                                    <option value="20">20</option>
                                    <option value="22">22</option>
                                    <option value="24">24</option>
                                    <option value="26">26</option>
                                </optgroup>
                                <optgroup label="Standard Sizes">
                                    <option value="XS">XS</option>
                                    <option value="S">S</option>
                                    <option value="M">M</option>
                                    <option value="L">L</option>
                                    <option value="XL">XL</option>
                                    <option value="2XL">2XL</option>
                                    <option value="3XL">3XL</option>
                                    <option value="4XL">4XL</option>
                                    <option value="5XL">5XL</option>
                                    <option value="6XL">6XL</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group" id="customColorGroup" style="display: none;">
                        <label for="customColor" class="form-label">Custom Color</label>
                        <input type="text" id="customColor" class="form-control" placeholder="Enter custom color name">
                    </div>
                    
                    <div class="current-quantity">
                        <label class="form-label">Current Quantity</label>
                        <div id="currentQuantity" class="quantity-display">0</div>
                    </div>
                </div>
                
                <div class="quantity-controls">
                    <div class="form-group">
                        <label for="quantityChange" class="form-label">Quantity Change</label>
                        <input type="number" id="quantityChange" class="form-control" placeholder="Enter amount" value="1" min="1">
                    </div>
                    
                    <div class="quick-actions">
                        <button class="btn btn--sm quick-btn" data-value="1">+1</button>
                        <button class="btn btn--sm quick-btn" data-value="-1">-1</button>
                        <button class="btn btn--sm quick-btn" data-value="5">+5</button>
                        <button class="btn btn--sm quick-btn" data-value="-5">-5</button>
                        <button class="btn btn--sm quick-btn" data-value="10">+10</button>
                        <button class="btn btn--sm quick-btn" data-value="-10">-10</button>
                    </div>
                    
                    <div class="action-buttons">
                        <button id="addInventory" class="btn btn--primary">‚ûï Add Inventory</button>
                        <button id="subtractInventory" class="btn btn--secondary">‚ûñ Subtract Inventory</button>
                    </div>
                    
                    <button id="updateInventory" class="btn btn--lg btn--full-width hidden">Update Inventory</button>
                </div>
                
                <div id="updateStatus" class="status-message hidden"></div>
            </div>
        </section>

        <!-- Demo Section for Testing -->
        <section class="card demo-section">
            <div class="card__header">
                <h2>üß™ Demo Mode</h2>
            </div>
            <div class="card__body">
                <p class="help-text">For testing without a real barcode scanner, use these sample barcodes:</p>
                <div class="demo-barcodes">
                    <button class="btn btn--outline btn--sm demo-barcode-btn" data-barcode="123456789012">Sample Barcode 1</button>
                    <button class="btn btn--outline btn--sm demo-barcode-btn" data-barcode="987654321098">Sample Barcode 2</button>
                    <button class="btn btn--outline btn--sm demo-barcode-btn" data-barcode="456789123456">Sample Barcode 3</button>
                    <button class="btn btn--outline btn--sm demo-barcode-btn" data-barcode="111222333444">New Product Demo</button>
                </div>
            </div>
        </section>

        <!-- Instructions Section -->
        <section class="card instructions-section">
            <div class="card__header">
                <h2>üìñ How It Works</h2>
            </div>
            <div class="card__body">
                <ol class="instructions-list">
                    <li>Configure your Airtable connection with the required 6 fields</li>
                    <li>Click "Start Camera" to begin scanning or use Demo Mode</li>
                    <li><strong>For existing products:</strong> App shows current details and allows quantity updates</li>
                    <li><strong>For new products:</strong> Enter product name, select color and size</li>
                    <li>Choose Add/Subtract and enter quantity amount</li>
                    <li>App automatically updates existing records or creates new ones</li>
                </ol>
                
                <div class="workflow-info">
                    <h4>üìä Enhanced Features</h4>
                    <ul>
                        <li>‚úÖ Automatic duplicate prevention - quantities are added to existing records</li>
                        <li>üé® Color tracking with predefined options plus custom colors</li>
                        <li>üìè Complete size range: Youth (6y-12y), Women's (4-26), Standard (XS-6XL)</li>
                        <li>üîÑ Smart update vs create logic based on barcode existence</li>
                        <li>üì± Mobile-friendly interface with organized size categories</li>
                    </ul>
                </div>
                
                <div class="help-links">
                    <p><strong>Need help getting started?</strong></p>
                    <a href="https://airtable.com/developers/web/api/introduction" target="_blank" class="help-link">üìö Airtable API Docs</a>
                    <a href="https://airtable.com/create/tokens" target="_blank" class="help-link">üîë Create Access Token</a>
                </div>
            </div>
        </section>

        <!-- Loading Overlay - Hidden by default -->
        <div id="loadingOverlay" class="loading-overlay hidden">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <p id="loadingMessage">Processing...</p>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>